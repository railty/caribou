function echo(e){document.write(e)}function get(e){return document.getElementById(e)}function init(){for(var e=get("tableMast");e.hasChildNodes();)e.removeChild(e.firstChild);curRow=1;for(var t=get("tableMast"),n=0;numRows+1>=n;n++){var i=t.insertRow(n);if(0==n)for(var a=0;numNumbers+2>a;a++)if(numNumbers>a){var r=i.insertCell(a);r.innerHTML="?"}else if(a==numNumbers){var r=i.insertCell(a);r.innerHTML="<div style='font-size:15px;'>"+text.correctDigits+"</div>",r.setAttribute("id","stats")}else{var r=i.insertCell(a);r.innerHTML="<div style='font-size:15px;'>"+text.correct+"</div>",r.setAttribute("id","stats")}else if(n==numRows+1){for(var a=0;numNumbers>a;a++){var r=i.insertCell(a);r.innerHTML='<input name="'+a+'" id="txt'+a+'" type="text" size="1" maxlength="1" onkeyup ="nextBox(event)"/>'}r=i.insertCell(a),r.id="msg2",r=i.insertCell(a),r.innerHTML='<button onclick="init();">'+text.restart+"</button>",r=i.insertCell(a),r.innerHTML='<button onclick="submitter();">'+text.enter+"</button>"}else for(var a=0;numNumbers+2>a;a++){var r=i.insertCell(a);r.innerHTML=""}}reset()}function submitter(){if(nextBox(!1)){for(var e=document.forms.inForm,t=0;numNumbers>t;t++)if(""==e.elements[t].value)return;submitSol(),victory||curRow==numRows+1||(clearInputs(),get("txt0").focus())}}function reset(){victory=!1,curRow=1;for(var e=1;numRows>=e;e++){row=get("tableMast").rows[e];for(var t=0;numNumbers+2>t;t++)row.cells[t].innerHTML="&nbsp",row.cells[t].className=""}randPuzzle(),get("txt0").focus(),get("msg").innerHTML="",clearInputs()}function clearInputs(){for(var e=document.forms.inForm,t=0;numNumbers>t;t++)e.elements[t].value="",e.elements[t].disabled=!1}function disableInputs(){for(var e=document.forms.inForm,t=0;numNumbers+1>t;t++)e.elements[t].disabled=!0}function randPuzzle(){for(var e={},t=0;maxNum+1>t;t++)e[t]=0;var n;get("tableMast").rows[0];for(var t=0;numNumbers>t;t++){for(;;)if(n=Math.floor(Math.random()*(maxNum+1))+1,e[n]+1<=maxSameNum)break;puzzle[t]=n,e[n]++}}function nextBox(e){for(var t=document.forms.inForm,n=0;numNumbers>n;n++)t.elements[n].value>=48||t.elements[n].value<=57||(t.elements[n].value=""),(parseInt(t.elements[n].value)>maxNum||0==parseInt(t.elements[n].value))&&(t.elements[n].value="");for(var t=document.forms.inForm,n=0;numNumbers>n;n++)if(""==t.elements[n].value)return t.elements[n].focus(),!1;return 13==e.keyCode&&submitter(),!0}function calcPoints(){for(var e=get("tableMast").rows[curRow],t=new Array(numNumbers),n=new Array(numNumbers),i=0,a=0,r=0;numNumbers>r;r++)t[r]=!1,n[r]=!1;for(var r=0;numNumbers>r;r++)e.cells[r].innerHTML==puzzle[r]&&(i++,t[r]=!0,n[r]=!0);for(var r=0;numNumbers>r;r++)if(1!=t[r])for(var o=0;numNumbers>o;o++)if(1!=n[o]&&e.cells[r].innerHTML==puzzle[o]){t[r]=!0,n[o]=!0,a++;break}return e.cells[numNumbers].innerHTML=i,e.cells[numNumbers+1].innerHTML=a,i==numNumbers&&win(),i}function submitSol(){for(var e=document.forms.inForm,t=get("tableMast").rows[curRow],n=0;numNumbers>n;n++)t.cells[n].innerHTML=e.elements[n].value;var i=calcPoints();if(curRow++,i!=numNumbers&&curRow==numRows+1){t=get("tableMast").rows[0];for(var n=0;numNumbers>n;n++)t.cells[n].innerHTML=puzzle[n],t.cells[n].className="headerLose";get("msg").innerHTML=text.lose,disableInputs(),update(2)}else victory||(get("msg").innerHTML=numRows-curRow+1>1?text.youHave+(numRows-curRow+1)+text.moreGuesses:text.oneMoreGuess)}function win(){victory=!0,row=get("tableMast").rows[0];for(var e=0;numNumbers>e;e++)row.cells[e].innerHTML=puzzle[e],row.cells[e].className="headerWin";get("msg").innerHTML=1==curRow?text.oneSolve:text.solved+curRow+text.tries,disableInputs(),update(1)}function draw(){echo('     <style type="text/css">       td.headerLose { background-color: red; }       td.headerWin { background-color: #55FF55; }       table td#stats { width: 180px; padding: 0px; markin: 0px; }       #inForm input { background-color: yellow;};       #tableMast { border: 0px solid black; }       #tableMast td { font-size:16px;font-family:Arial;border:1px solid blue;height:25px;width:25px;text-align:center;padding:1px;margin:0px; }       #msg { color:red; }     </style>'),echo(text.instruct),1!=maxSameNum?echo(text.maxSame):echo(text.oneSame),echo(text.example),echo('     <center>       <table border="0"><tr>         <td style="vertical-align:top">             <form id="inForm" onsubmit="return false;">               <table id="tableMast"></table>             </form>         </td>         </tr>       </table>       <hr/>       <div id="msg"></div>     </center>')}if(code_length>highest_number&&alert("!!!code_length and highest_number clash!!!"),isTest!==!1)var isTest=!0;if(!lang)var lang="en";var victory=!1,numRows=max_num_tries,numNumbers=code_length,maxNum=highest_number,maxSameNum=max_allowed_duplicates,puzzle=new Array(numNumbers),curRow,text=new Object;"en"==lang?(text.alertText="You won! Congratulations! Don't forget to submit your answer below if it is not submitted automatically.",text.correctDigits="How many digits are correct and in right place",text.correct="How many digits are correct but in wrong place",text.restart="Restart",text.enter="Enter",text.lose="Sorry, you used the maximal number of tries. The correct solution is shown in red.",text.youHave="You have ",text.moreGuesses=" more guesses.",text.oneMoreGuess="You have 1 more guess.",text.solved="You solved the puzzle in ",text.tries=" tries!",text.oneSolve="You solved the puzzle in 1 try!",text.instruct="- In the table each <i>?</i> in the first row stands for one of the digits 1 through "+maxNum+". Your task is to find these digits by guessing them in the yellow marked boxes at the bottom and then pressing or clicking Enter.<br/>",text.maxSame="- Each number can appear up to "+maxSameNum+" times in the solution.<br/>",text.oneSame="- Each number can only appear once in the solution.<br/>",text.example='- For example, assume the ? ? ? ? stand for 4 2 6 1 and you guess 6 2 1 3 then the computer will return in the column "right place" a 1 for the digit 2 and in the column "wrong place" a 2 for the two digits 1 and 6.'):"fr"==lang&&(text.alertText="Vous avez gagn\u00E9! Votre victoire sera soumis automatiquement.",text.correctDigits="Combien de chiffres sont corrects et &#224; la bonne place",text.correct="Combien de chiffres sont corrects, mais au mauvais endroit",text.restart="Recommencer",text.enter="Entrer",text.lose="D&#233;sol&#233;, vous avez utilis&#233; le nombre maximal de tentatives. La solution correcte est affich&#233;e en rouge.",text.youHave="Vous avez ",text.moreGuesses=" essais qui vous restent.",text.oneMoreGuess="Vous avez un essai qui vous reste.",text.solved="Vous avez r&#233;solu le casse-t&#234;te dans ",text.tries=" essais!",text.oneSolve="Vous avez r&#233;solu le casse-t&#234;te en 1 essai!",text.instruct="- Dans le tableau, chaque <i>?</i> dans la premi&#232;re rang&#233;e repr&#233;sente l'un des chiffres 1 &#224; "+maxNum+". Votre t&#226;che est de trouver ces chiffres en les devinant dans les domaines marqu&#233;s en jaune en bas et en appuyant ou en cliquant sur Entrer.<br/>",text.maxSame="- Chaque nombre peut appara&#238;tre jusqu'&#224; "+maxSameNum+" fois dans la solution.<br/>",text.oneSame="- Chaque nombre peut appara&#238;tre qu'une seule fois dans la solution.<br/>",text.example='- Par exemple, supposons que le ? ? ? ? reposer pendant 4 2 6 1 et vous devinez 6 2 1 3. L\'ordinateur retournera dans la colonne "bon endroit" un 1 pour le chiffre 2 et dans la colonne "mauvais endroit" un 2 pour les deux chiffres 1 et 6.');var update=function(e){get("answer").value=e,1==e&&(alert(text.alertText),get("question").submit())};highest_number>=code_length&&(draw(),init());