function pos(e,t){return e+"+"+t}function up(){var e,t,i;for(e=0;size>e;e++)for(t=0;size>t;t++)i=get(pos(e,t)),board[e][t]=i.value,i.className=(consf[e][t]?"c":"u")+board[e][t]}function get(e){return document.getElementById(e)}function echo(e){document.write(e)}function toInt(e){switch(e){case"A":case"a":return 1;case"B":case"b":return 2;case"C":case"c":return 3;case"D":case"d":return 4;case"E":case"e":return 5;case"F":case"f":return 6;case"G":case"g":return 7;case"H":case"h":return 8;case"I":case"i":return 9;case"J":case"j":return 10;case"K":case"k":return 11;case"L":case"l":return 12;case"M":case"m":return 13;case"N":case"n":return 14;case"O":case"o":return 15;case"P":case"p":return 16;case"Q":case"q":return 17;case"R":case"r":return 18;case"S":case"s":return 19;case"T":case"t":return 20;case"U":case"u":return 21;case"V":case"v":return 22;case"W":case"w":return 23;case"X":case"x":return 24;case"Y":case"y":return 25;case"Z":case"z":return 26;default:return 0}}function decode(e){var t,i,n=0,a=0;for(i=0;size>i;i++)board[i]=Array(),soln[i]=Array(),consf[i]=Array();for(i=0;4>i;i++)clues[i]=Array();for(i=0;i<e.length;i++)t=e.charAt(i),"|"==t?(n++,a=0):t.toUpperCase()==t?(board[n][a]=soln[n][a]=toInt(t),consf[n][a]=!0,a++):(board[n][a]=0,soln[n][a]=toInt(t),consf[n][a]=!1,a++);size=n+1;var s,o;for(j=0;size>j;j++){for(s=1,o=soln[0][j],i=0;size>i;i++)soln[i][j]>o&&(s++,o=soln[i][j]);clues[0][j]=s}for(j=size-1;j>=0;j--){for(s=1,o=soln[size-1][j],i=size-1;i>=0;i--)soln[i][j]>o&&(s++,o=soln[i][j]);clues[3][j]=s}for(j=0;size>j;j++){for(s=1,o=soln[j][0],i=0;size>i;i++)soln[j][i]>o&&(s++,o=soln[j][i]);clues[1][j]=s}for(j=size-1;j>=0;j--){for(s=1,o=soln[j][size-1],i=size-1;i>=0;i--)soln[j][i]>o&&(s++,o=soln[j][i]);clues[2][j]=s}}function clearBoard(){for(var e=0;size>e;e++)for(var t=0;size>t;t++)consf[e][t]||(get(pos(e,t)).value=board[e][t]="");up(),h=0}function isLatin(){var e,t,i;for(e=0;size>e;e++){for(t=0;size>t;t++)for(i=t+1;size>i;i++)if(board[e][t]==board[e][i])return!1;for(t=0;size>t;t++)for(i=t+1;size>i;i++)if(board[t][e]==board[i][e])return!1}return!0}function checkSoln(){var e,t,i=!1;for(up(),e=0;size>e;e++)for(t=0;size>t;t++)if(!board[e][t])return;if(update(2),!isLatin())return alert(text.notLatin),void 0;var n=Array();for(e=0;4>e;e++)n[e]=Array();var a,s;for(t=0;size>t;t++){for(a=1,s=board[0][t],e=0;size>e;e++)board[e][t]>s&&(a++,s=board[e][t]);n[0][t]=a}for(t=size-1;t>=0;t--){for(a=1,s=board[size-1][t],e=size-1;e>=0;e--)board[e][t]>s&&(a++,s=board[e][t]);n[3][t]=a}for(t=0;size>t;t++){for(a=1,s=board[t][0],e=0;size>e;e++)board[t][e]>s&&(a++,s=board[t][e]);n[1][t]=a}for(t=size-1;t>=0;t--){for(a=1,s=board[t][size-1],e=size-1;e>=0;e--)board[t][e]>s&&(a++,s=board[t][e]);n[2][t]=a}for(e=0;4>e;e++)for(t=0;size>t;t++)n[e][t]!=clues[e][t]&&(i=!0);i?alert(text.wrong):update(1)}function checkForRange(e,t){var i=e.which?e.which:e.keyCode;if(9==i)return!0;if(37==i||39==i)return!0;if(!(i>47&&i<49+Math.min(size,9)||i>96&&i<98+Math.min(size,9)||8==i||46==i))return!1;var n=get(t.attributes.id.value),a=t.selectionStart,s=t.selectionEnd;if(void 0==a||void 0==s){var o=document.selection.createRange().getBookmark(),r=t.createTextRange();r.moveToBookmark(o);var l=t.createTextRange();l.collapse(!0),l.setEndPoint("EndToStart",r);var c=l.text.length,u=r.text.length;a=c,s=c+u}return(a!=s||8==i&&a||46==i&&!s||n.value.length+1<=n.maxLength)&&(hist[h]=new Object,hist[h].id=t.attributes.id.value,hist[h].val=n.value,h++),!0}function undo(){h&&(h--,get(hist[h].id).value=hist[h].val,delete hist[h],up())}function to_color(e){switch(e){case 1:return"background:rgb(146,248,70);";case 2:return"background:rgb(255,255,0);";case 3:return"background:rgb(255,200,47);";case 4:return"background:rgb(255,0,0);";case 5:return"background:rgb(202,62,94);";case 6:return"background:rgb(83,140,208);";case 7:return"background:rgb(235,235,222);";case 8:return"background:rgb(100,100,100);";case 9:return"background:rgb(175,13,102);";case 10:return"background:rgb(55,19,112);";case 11:return"background:rgb(255,255,150);";case 12:return"background:rgb(255,118,0)";case 13:return"background:rgb(205,145,63);";case 14:return"background:rgb(12,75,100);";case 15:return"background:rgb(0,0,180);";case 16:return"background:rgb(175,155,50);";case 17:return"background:rgb(74,0,0);";case 18:return"background:rgb(37,70,25);";case 19:return"background:rgb(121,33,135);";case 20:return"background:rgb(185,185,185);";case 21:return"background:rgb(0,154,37);";case 22:return"background:rgb(178,220,205);";case 23:return"background:rgb(255,152,213);";case 24:return"background:rgb(0,0,127);";case 25:return"background:rgb(175,200,74);";case 26:return"background:rgb(63,25,12);";default:return"background:rgb(255,255,255);"}}function draw(){var e,t,i,n=' type="text" size="1" maxLength="'+(size>9?2:1)+'" onKeyDown="return(checkForRange(event,this))" onKeyUp="checkSoln()"',a='<div style="font-weight:bold;height:40px;width:40px;background-repeat:no-repeat;text-align:center;background-image:url(',s=');"><span style="font-size:14px;position:relative;top:25%;">',o='<table border="0" cellpadding="1" cellspacing="1" align="center">';for(o+="<tr><td>&nbsp;</td>",e=0;size>e;e++)o+='<td align="center">'+a+img[0].src+s+clues[0][e]+"</span></div></td>";for(o+="<td>&nbsp;</td></tr>",e=0;size>e;e++){for(o+="<tr>",o+='<td align="center">'+a+img[1].src+s+clues[1][e]+"</span></div></td>",t=0;size>t;t++)i='id="'+pos(e,t)+'"'+(consf[e][t]?' class="c'+soln[e][t]+'" value="'+soln[e][t]+'" readonly="readonly"':'class="u"'),o+='<td align="center"><input '+i+n+"/></td>";o+='<td align="center">'+a+img[2].src+s+clues[2][e]+"</span></div></td>",o+="</tr>"}for(o+="<tr><td>&nbsp;</td>",e=0;size>e;e++)o+='<td align="center">'+a+img[3].src+s+clues[3][e]+"</span></div></td>";o+="<td>&nbsp;</td></tr>",o+="</table>",get("sky").innerHTML=o}var board=Array(),consf=Array(),soln=Array(),clues=Array(),size=26,hist=Array(),h=0,img=Array();if(img[0]=new Image,img[0].src="/caribou/games/images/sky/top.png",img[1]=new Image,img[1].src="/caribou/games/images/sky/left.png",img[2]=new Image,img[2].src="/caribou/games/images/sky/right.png",img[3]=new Image,img[3].src="/caribou/games/images/sky/bottom.png",isTest!==!1)var isTest=!0;if(!lang)var lang="en";decode(problem);var text=new Object;"en"==lang?(text.alertText="You won! Congratulations! Don't forget to submit your answer below if it is not submitted automatically.",text.notLatin="Each number can only appear once in each row and column!",text.wrong="That is not a correct solution. Try again.",text.instruct="<h4>Skyscrapers</h4><ul><li>Each of the boxes contains a skyscraper.</li><li>Put numbers 1 to "+size+" into the boxes which give the height of the building. The higher the number, the taller the skyscraper.</li><li>Each row and each column contains each number exactly once.</li><li>The number in an arrow shows you <b>how many</b> skyscrapers can be seen when looking in the direction of the arrow.</li><li>You cannot see a shorter skyscraper behind a taller one.</li></ul>",text.restart="Restart",text.undo="Undo"):"fr"==lang&&(text.alertText="Vous avez gagn\u00E9! Votre victoire sera soumis automatiquement.",text.notLatin="Chaque nu\u00E9ro ne peut appara\u00EEtre dans chaque rang\u00E9e et colonne qu'une seule fois!",text.wrong="La solution n'est pas correcte. R\u00E9essayez de nouveau.",text.instruct="<h4>Gratte-ciels</h4><ul><li>Chaque case dans la grille ci-dessous repr&#233;sente un gratte-ciel.</li><li>Rempli toutes les cases de la grille avec un num&#233;ro de 1 &#224; "+size+".</li><li>Chaque rang&#233;e et chaque colonne contient chaque num&#233;ro une seule fois.</li><li>Les num&#233;ros sont une mesure de la hauteur du gratte-ciel dans la case. Plus le num&#233;ro est grand, plus le gratte-ciel est haut.</li><li>Toutes les fl&#232;ches &#224; l'ext&#233;rieur de la grille contiennent un num&#233;ro qui indique le nombre de gratte-ciels qui sont visibles en regardant dans la direction de la fl&#232;che.</li><li>Les plus petits gratte-ciels ne sont pas visibles derri&#232;re les plus grands.</li></ul>",text.restart="R&#233;essayer",text.undo="Annuler");var update=function(e){get("answer").value=e,1==e&&(alert(text.alertText),get("question").submit())};echo("<style>input.u { font-size:20px;width:40px;height:40px;text-align:center; }");for(var c=1;size>=c;c++)echo("    input.c"+c+" { font-size:20px;width:40px;height:40px;text-align:center;font-weight:bold;"+to_color(c)+" }    input.u"+c+" { font-size:20px;width:40px;height:40px;text-align:center;"+to_color(c)+" }");echo("</style>"),echo(text.instruct),echo('<form name="sky" id="sky" action="javascript:checkSoln()"></form>'),echo('<center><input type="button" value="'+text.restart+'" onClick="clearBoard()"/><input type="button" value="'+text.undo+'" onClick="undo()"/>'),isTest||echo('<input type="button" value="New Game" onclick="document.location.reload()"/>'),echo("</center>"),draw();